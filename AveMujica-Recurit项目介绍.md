# AveMujica-Recuirt项目简介

## 项目模块

### 用户管理（UserManager）

负责注册，密码修改，邮箱校验等。

### 招新题目（Question）

负责题目增删改查，用户提交，记录查询，题目批改等。

### 排行榜（Charts）

负责排行榜维护，查询等。

### 公有工具（Common）

负责提供工具类，共用的DTO，Mapper，Service，以及集中错误信息处理等。

### 启动类（Entrance）

负责配置，提供过滤链，提供拦截器等。

---

## 主要技术栈

SpringBoot、Mybatis-plus、Postgresql、RabbitMQ、MinIO、Caffeine、Redis

---

## 技术需求

- **模块解耦**：本项目拆分为5个模块，但部分模块存在Mybatis-plus提供的Mapper和Service的耦合。
- **接口设计**：本项目采用RESTful风格API。
- **并发控制**：对高并发场景使用ip限流及线程锁的方式保证数据一致。
- **多级缓存**：对部分热点数据采用Caffeine+Redis+BloomFilter的缓存优化及请求阻挡，当数据不存在时使用Redis空值防止穿透。同时，使用Redisson提供的锁保证穿透时仅有一次请求进入数据库。
- **异步更新**：对热点数据或排行榜利用消息队列异步执行更新操作。
- **身份认证**：实现基于JWT的身份校验。
- **数据保护**：实现密码加密，过滤连ip限流，拦截器防重放，以及日志系统。

---

## 功能需求

### 用户管理系统

- **注册登录**：支持邮箱验证码、密码重置功能
- **用户资料管理**：包括个人资料、积分与解题进度
- **角色权限管理**：支持动态角色分配（如普通用户、管理员）
- **可疑请求拦截**：实现部分可疑UserAgent拦截和部分注入拦截，功能有待继续完善。

### 题目管理系统

- **题目 CRUD**：支持多种题型（选择题、附件题、flag题等）
- **题目分类与难度**：按方向、难度分类管理。统计题目数据并由平均分，答题人数，标准差生成题目分数衰减率，动态更新排行榜数据。
- **解题与评分**：系统自动打分 / 管理员人工改分

### **排行榜系统**

- **积分计算**：基于解题情况动态计算用户积分
- **实时排名**：支持排行榜实时刷新与展示。本项目设置的缓存有效时间较短，故并未特别关注数据库和缓存的数据一致性，数据库更新时，等待缓存自动失效即可。
- **多维度排序**：可按方向等筛选排行榜。本项目并未对学号和年级做支持，但基于目前架构升级较为容易。

---

## 优化方向

### 数据库IO

本项目存在大量可优化的数据库CRUD，仅有小部分热点字段存在索引。

### 数据一致性

本项目仅小部分数据对缓存的实时更新做出了支持。

### 可疑IP拦截

本项目目前的拦截机制较为简陋，需要扩充更多方面的拦截机制。

---

## 部分补充说明

### MinIO

本项目仅使用了社区版MinIO，大量文件管理功能缺失。此处仅为了储存答案和提供下载链接而存在。

### 缓存

若工作室网站仅部署在单个服务器上，本项目中使用的Caffeine和Redis缓存会有些多余，相信仅仅是数据库二级缓存已经够用。

### 工具

本项目有使用一些小工具来辅助开发，它们主要位与Common模块的entity目录中。

### AI

本项目开发中多次使用AI进行辅助纠错和代码解析。

### 配置
本项目的配置文件位于启动类的resource目录，部分配置已经删除，在github仓库内有完整的配置。

### 仓库
https://github.com/XY172XY/AveMujica-Recurit

---

## 环境配置

### SpringBoot：3.1.7

### Mybatis-plus：3.5.5

### Redis：8.2.1

**其余随意即可。**





